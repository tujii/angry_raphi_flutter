# AngryRaphi

AngryRaphi is a Flutter web app for reporting and rating tech problems. Users can create "Raphcons" (tech issues) which can then be rated by others. The app generates weekly AI-powered summaries using Google Gemini AI and displays them as rotating "Story of the Week" content. The system uses Firebase for authentication, database and hosting with automated CI/CD pipeline via GitHub Actions.

## ğŸš€ Live Demo

- **Production**: [angryraphi.web.app](https://angryraphi.web.app)
- **Preview URLs**: Generated automatically for each Pull Request

## âœ¨ Features

- ğŸ“ **Problem Reporting**: Create and submit tech issues ("Raphcons")
- â­ **Rating System**: Rate and evaluate reported problems
- ğŸ¤– **AI-Powered Stories**: Weekly summaries generated by Google Gemini AI
- ğŸ”„ **Rotating Content**: Dynamic "Story of the Week" with smooth animations
- ğŸ” **Authentication**: Secure login/registration via Firebase Auth
- ğŸ‘¥ **User Management**: Public user directory and profiles
- ğŸŒ **Multi-language**: German/English localization support
- ğŸ“± **Responsive Design**: Works on desktop and mobile devices

## ğŸš€ Live Demo

- **Production**: [angryraphi.web.app](https://angryraphi.web.app)
- **Preview URLs**: Generated automatically for each Pull Request

## âœ¨ Features

- ğŸ“ **Problem Reporting**: Create and submit tech issues ("Raphcons")
- â­ **Rating System**: Rate and evaluate reported problems
- ğŸ¤– **AI-Powered Stories**: Weekly summaries generated by Google Gemini AI
- ğŸ”„ **Rotating Content**: Dynamic "Story of the Week" with smooth animations
- ğŸ” **Authentication**: Secure login/registration via Firebase Auth
- ğŸ‘¥ **User Management**: Public user directory and profiles
- ğŸŒ **Multi-language**: German/English localization support
- ğŸ“± **Responsive Design**: Works on desktop and mobile devices

## Requirements

- **Flutter**: 3.27.4+ (see `.dart_tool/version`)
- **Dart**: 3.6.0+
- **Node.js**: 18.0.0+ (for Firebase CLI and web builds)
- **Java**: 21+ (for Android builds)
- **Firebase CLI**: Latest version

## ğŸ”’ Security

This project follows security best practices. See [SECURITY.md](SECURITY.md) for:
- Security policy and audit findings
- Secret management best practices
- How to report vulnerabilities
- Firebase security configuration

**Key Security Points:**
- âœ… Firebase client credentials are safe to commit (by design)
- âœ… Private API keys are never committed (protected by `.gitignore`)
- âœ… Security enforced through Firestore Security Rules
- âœ… All secrets managed via environment variables or local files

## Setup

### API Keys (Optional - for AI Features)

To use the Gemini AI features, obtain a free API key from Google AI Studio:

1. **Get API Key**: Visit [Google AI Studio](https://aistudio.google.com/app/api-keys)
2. **Configure Locally**: Create `gemini_api_key` file in project root
   ```bash
   echo "YOUR_API_KEY_HERE" > gemini_api_key
   ```
   âš ï¸ This file is already in `.gitignore` and will NOT be committed

**Alternative Methods:**
- **Environment Variable**: `export GEMINI_API_KEY='your-key'`
- **GitHub Codespaces**: Add as repository secret
- **See**: `documentations/GEMINI_AI_SETUP.md` for detailed instructions

**Note**: The app works without an API key using template-based stories.

## Development

**âš ï¸ Note**: This app connects directly to the production Firebase database. There is no local emulator setup.

### Install Dependencies
```bash
flutter pub get
```

### Run Locally
```bash
flutter run -d chrome
```

## ğŸš€ Deployment

Deployment is fully automated via GitHub Actions:

- **Preview**: Automatic on every push/PR - each merge request creates a new preview URL
- **Production**: Create and push a tag (`git tag v2.1.0 && git push origin v2.1.0`)

No manual build or deployment steps needed!

### Testing
```bash
flutter test
```

## ğŸ—ï¸ Architecture

- **Frontend**: Flutter Web with responsive design
- **State Management**: BLoC (Business Logic Component) pattern
- **Backend**: Firebase (Firestore, Authentication, Hosting)
- **AI Integration**: Google Gemini API for content generation
- **CI/CD**: GitHub Actions with automated testing and deployment
- **Deployment**: Firebase Hosting with preview channels

## ğŸ“ Project Structure

```
lib/
â”œâ”€â”€ core/           # Core utilities and constants
â”œâ”€â”€ features/       # Feature-based modules
â”‚   â””â”€â”€ user/       # User management features
â”œâ”€â”€ models/         # Data models
â”œâ”€â”€ services/       # API and business logic services
â”œâ”€â”€ shared/         # Shared widgets and utilities
â”œâ”€â”€ utils/          # Helper functions
â””â”€â”€ widgets/        # Reusable UI components
```

## ğŸ”§ Environment Setup

### Firebase Configuration

**Note**: Firebase client credentials in this repository are safe and meant to be public. See [SECURITY.md](SECURITY.md) for details.

**Configuration Files (Already Present):**
- âœ… `lib/firebase_options.dart` - Client configuration (safe to commit)
- âœ… `android/app/google-services.json` - Android config (safe to commit)  
- âœ… `ios/Runner/GoogleService-Info.plist` - iOS config (safe to commit)

**Firebase Console Setup:**
1. Ensure Authentication is enabled
2. Deploy Firestore security rules (`firestore.rules`)
3. Enable Hosting
4. Configure API restrictions (HTTP referrers, package names)

**Security:** Enforced by Firestore Security Rules and Firebase Authentication

### Required Files for Development

**Public Files (Safe to Commit):**
- âœ… Firebase configuration files (already present)
- âœ… `firestore.rules` - Security rules

**Private Files (Must NOT Commit):**
- âŒ `gemini_api_key` - Optional, for AI features (in `.gitignore`)
- âŒ Service account JSON - For CI/CD (stored as GitHub secret)

## ğŸ¤ Contributing

### Branch Strategy
- `main`: Production branch (protected)
- Feature branches: `feature/your-feature-name`
- Create Pull Requests for all changes

### Code Style
- Follow Dart/Flutter conventions
- Run `flutter analyze` before committing
- Ensure tests pass: `flutter test`
- Use meaningful commit messages

### Development Workflow
1. Create feature branch from `main`
2. Make your changes
3. Run tests and analysis
4. Create Pull Request
5. Preview URL will be generated automatically
6. Merge after review

## ğŸ› Troubleshooting

### Common Issues

**Build Errors:**
- Ensure Flutter version matches `.dart_tool/version`
- Run `flutter clean && flutter pub get`

**Firebase Errors:**
- Check `firebase_options.dart` configuration
- Verify Gemini API key in `gemini_api_key` file

**Authentication Issues:**
- Ensure Firebase Auth is enabled in console
- Check domain is added to authorized domains

### Getting Help
- Check existing issues in GitHub
- Review Firebase Console for errors
- Verify all environment variables are set

## ğŸ”— Links

- **Firebase Console**: [console.firebase.google.com](https://console.firebase.google.com)
- **GitHub Actions**: [Repository Actions](../../actions)
- **Google AI Studio**: [aistudio.google.com](https://aistudio.google.com/app/api-keys)
- **Flutter Docs**: [docs.flutter.dev](https://docs.flutter.dev)

## ğŸ“„ License

This project is licensed under the MIT License - see the LICENSE file for details.
